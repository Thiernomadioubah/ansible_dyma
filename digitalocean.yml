plugin: community.digitalocean.digitalocean
api_token: dop_v1_50fe40e2a3e7e037f9dc8375267ca43f0dbf1e2ca6e0f6423c5c9a67d209a247
attributes:
  - id
  - name
  - memory
  - vcpus
  - disk
  - size
  - image
  - networks
  - volume_ids
  - tags
  - region
keyed_groups:
  - key: do_region.slug
    prefix: 'region'
    separator: '_'
  - key: do_tags | lower
    prefix: ''
    separator: ''
  - key: do_name | regex_search('node') | ternary('managed_nodes', '')
    prefix: ''
    separator: ''
compose:
  ansible_host: do_networks.v4 | selectattr('type','eq','public') | map(attribute='ip_address') | first
  class: do_size.description | lower
  distro: do_image.distribution | lower
filters:
  - 'do_name != "ansible-control"'